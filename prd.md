# Product Requirements Document (PRD)

## AI 기반 대학생 주거 의사결정 지원 플랫폼
### Real Estate Matching & Advisory Service

---

**문서 버전:** 2.0 (Final)  
**작성일:** 2024년 12월  
**프로젝트 목적:** 학원 프로젝트 → 실제 서비스 출시  
**팀 구성:** 5명 (백엔드 Lead, RAG Engineer 2명, MLOps, Frontend Lead, LLM Prompt Engineer)  
**프로젝트 범위:** MVP (6-8주) → 베타 → 정식 출시

---

## Executive Summary

### 제품 한 줄 정의

**첫 자취 대학생이 집을 고를 때, AI가 추천·설명·리스크 근거를 제공해 혼자서도 판단하게 돕는 주거 의사결정 서비스**

### 핵심 가치 제안

본 플랫폼은 단순한 매물 추천을 넘어, AI 기반 양방향 매칭과 의사결정 지원을 통해 부동산 중개 과정을 혁신합니다. 특히 정보 부족과 불안을 겪는 대학생 타겟에게 '왜 이 집이 맞는지', '왜 위험할 수 있는지'를 투명하게 설명하여 신뢰 기반의 주거 선택을 가능하게 합니다.

- **AI 중개인 대체**: 부동산 중개인 없이 AI Agent 기반 자동 매칭
- **양방향 매칭**: 임차인→매물, 임대인→임차인 동시 추천
- **투명한 판단 근거**: 추천 이유와 리스크를 데이터 기반으로 설명
- **RAG 기술 활용**: 구조화된 부동산 데이터와 벡터 검색 최적화
- **개인화 추천**: 사용자 취향과 피드백 기반 학습형 추천 시스템

---

## 1. Product Vision & Strategy

### 1.1 비전

AI 시대의 직방, 다방을 넘어서는 차세대 부동산 중개 플랫폼으로, 대기업 수준의 서비스를 제공하며 부동산 중개 산업의 AI 전환을 선도합니다.

### 1.2 제품 철학

- AI는 결정을 강요하지 않고, 판단 근거와 리스크를 투명하게 제시하여 사용자가 스스로 결정하게 돕습니다
- **추천보다 중요한 것은 이해와 신뢰입니다**
- 공공데이터 기반 사실과 AI 해석을 분리한 투명한 혼합 판단 모델을 제공합니다

### 1.3 왜 이 시장이 강력한가?

- 부동산 중개는 인간 의존도가 매우 높은 시장으로 AI 대체 가능성이 높음
- 매물 정보는 구조적 텍스트 데이터로 RAG 기술과 완벽하게 호환
- 사용자 취향 기반 추천이 자연스럽고 Agent 구조와 완벽히 일치
- 대기업도 노리는 시장으로 확장 가능성이 매우 큼

---

## 2. Problem Statement

### 2.1 핵심 문제 정의

첫 자취 대학생은 부동산 정보와 계약 지식이 부족하며, 시간 압박과 불안으로 인해 충분한 검토 없이 의사결정하는 경우가 많습니다. 기존 서비스는 많은 매물을 보여주지만 **판단과 설명을 대신해주지 못합니다**.

### 2.2 타겟 사용자의 Pain Points

- **정보 부족**: 부동산 사전지식이 거의 없음
- **불안감**: 첫 계약에 대한 두려움과 리스크에 대한 우려
- **시간 압박**: 학기 시작 전 빠른 결정이 필요함
- **설명 부족**: 왜 이 집이 맞는지, 무엇이 위험한지 알려주는 사람이 없음
- **신뢰 문제**: 중개인을 전적으로 신뢰하기 어려움

---

## 3. Target Users

### 3.1 Primary Target (핵심 타겟)

**20~30대 대학생 및 사회초년생 (첫 자취 수요자)**

#### 특성:
- 부동산 사전지식이 부족하지만 결정권자
- **정보 부족 + 불안 + 시간 압박**이 동시에 존재
- 의사결정은 스스로 하지만 **설명이 반드시 필요한 사용자**
- AI 서비스에 대한 거부감이 낮음 (디지털 네이티브)

#### 핵심 인사이트:
> 단순 추천보다 **'왜 이 집이 맞는지 / 왜 위험한지'를 설명해주는 것이 핵심 가치**

### 3.2 주요 타겟 지역 (MVP)

대학생 밀집 지역 중심:
- **서울 서부권**: 마포구, 서대문구, 은평구
- **서울 동북권**: 혜화, 노원, 도봉
- **추후 확장**: 영등포구, 용산구 등

**초기 전략**: 서울 일부 구만 선택 가능하도록 제한하여 품질 집중

### 3.3 Secondary Target

- **임대인**: 효율적인 임차인 매칭을 원하는 소규모 임대사업자
- **향후 확장**: 대기업 사내 주거 지원 담당자 (B2B)

---

## 4. Solution Overview

### 4.1 핵심 솔루션

AI가 **추천 + 설명 + 리스크 경고**를 함께 제공하여, 대학생이 혼자서도 집을 판단할 수 있게 돕는 의사결정 보조 서비스입니다. 중개인의 설명과 판단 역할을 단계적으로 AI가 대체합니다.

### 4.2 차별화 요소

#### 기존 서비스 (직방, 다방 등):
- 매물 나열 중심
- 필터링 기능만 제공
- 판단은 사용자 몫

#### 본 서비스:
- ✅ AI 기반 개인화 추천
- ✅ 추천 이유 상세 설명 제공
- ✅ 리스크 사전 경고 (전세사기, 건축물대장 위반 등)
- ✅ 양방향 매칭 (임차인↔임대인)
- ✅ 의사결정 지원 (AI 상담)

---

## 5. System Architecture

### 5.1 핵심 기술 스택

#### Frontend:
- 웹 기반 UI (React/Vue 등)
- 반응형 디자인 (모바일 대응)

#### Backend:
- **FastAPI** (Python)
- **JWT + Redis** (세션 관리)
- RESTful API 설계

#### Database:
- **PostgreSQL** (관계형 데이터)
- **pgvector** (벡터 검색)
- Vector dimension: **1536** (OpenAI 임베딩)

#### AI & ML:
- **OpenAI API** (임베딩 및 생성)
- **RAG** (Retrieval-Augmented Generation)
- 벡터 유사도 검색 (코사인 유사도)

#### Infrastructure:
- **RabbitMQ** (비동기 메시지 큐)
- **aio-pika** (비동기 Python 클라이언트)
- **S3 / MinIO** (파일 스토리지)
- **Docker Compose** (컨테이너 오케스트레이션)

### 5.2 AI Agent 구조

#### Agent 1 - 요구조건 정제 및 콘텐츠 생성
- 임차인 요구조건 요약 및 정제
- 임대인 매물 설명 자동 생성 (AI 작문)
- 사용자 입력 → 구조화된 텍스트로 변환

#### Agent 2 - 임차인→매물 추천 (RAG)
- 임차인 프로필 + 요구조건 기반 매물 추천
- 벡터 검색으로 유사 매물 N개 추출
- 추천 이유 설명 생성

#### Agent 3 - 임대인→임차인 추천 (RAG)
- 임대인 매물 + 요구조건 기반 임차인 추천
- 벡터 검색으로 적합한 임차인 N명 추출
- 추천 사유 설명 생성

### 5.3 데이터 파이프라인

#### ETL (Extract-Transform-Load) 프로세스:

**1. Extract: 공공 API 데이터 수집**
- 국토부 API (아파트 실거래가, 지역 통계)
- 직방 API (2차 프로젝트용)
- 네이버부동산 크롤링 (3차 이후)

**2. Transform: 데이터 전처리 및 임베딩**
- 청킹 전략 수립 (매물 단위, 지역 단위)
- LLM 생성 텍스트 정제
- OpenAI 임베딩 생성 (vector 1536)

**3. Load: pgvector DB 저장**
- 매물 임베딩 저장
- 임차인 프로필 임베딩 저장
- 인덱싱 최적화 (IVFFlat, HNSW)

---

## 6. Core Features & Requirements

### 6.1 사용자 등급 체계

#### 무료 사용자:
- 매물 의뢰서 1개 작성
- 추천 매물 10개/일
- 리스크 경고 핵심 Top 3 요약
- 임대인 컨택 요청 제한 (1회/일)

#### 프리미엄 사용자:
- 매물 의뢰서 무제한
- 추천 매물 무제한
- 리스크 경고 상세 (근거·출처·통계 포함)
- AI 추가 질의 가능 (조건 재정제, 상담)
- 채팅/컨택 우선권
- 매물별 AI 챗봇 (심화 질의응답)

### 6.2 MVP 필수 기능 (Priority 1)

#### 회원 관리:
- 소셜 로그인 (Google OAuth)
- 역할 구분: 임차인 / 임대인 (단일 테이블, role 컬럼)
- JWT + Redis 세션 관리

#### 임차인 기능:
- ✅ 다중 매물 의뢰서 생성 (여러 프로필 관리)
- ✅ 조건 입력 UI (지역, 가격, 매물 종류, 계약 형태)
- ✅ AI 기반 개인화 추천 매물 N개 조회
- ✅ 추천 이유 설명 (AI 판단 근거)
- ✅ 리스크 경고 카드 UI (Top 3 경고)
- ✅ 관심 매물 저장 (행동 데이터 수집)
- ✅ 매물 상세 정보 조회 (네이버부동산 스타일)
- ✅ 임대인 컨택 요청 (수락 시 전화번호 공개)

#### 임대인 기능:
- ✅ 매물 등록 (지역, 종류, 가격, 계약 형태)
- ✅ 사진 업로드 (S3/MinIO 연동)
- ✅ AI 자동 매물 설명 생성 (Agent 1)
- ✅ 적합한 임차인 N명 추천 (Agent 3)
- ✅ 임차인 의뢰서 열람
- ✅ 컨텍하기 (요청 전송, 수락 시 전화번호 확인)

#### 검색 및 필터링:
- 지역 선택: 마포구, 용산구, 영등포구 (초기)
- 매물 종류: 아파트, 오피스텔, 빌라, 주택, 상가
- 계약 형태: 전세, 매매
- 가격 범위 필터

#### 비동기 처리:
- 추천 요청 시 task_id 발급
- 로딩 UI (찾는 중... 상태 표시)
- 완료 시 결과 조회

### 6.3 후순위 기능 (Phase 2+)

- 지도 UI 통합 (매물 위치 시각화)
- 이미지 기반 추천 (사진 유사도 검색)
- 별점 시스템 (사용자 평가)
- 실시간 인기 매물 수 표시
- 채팅 기능 (실시간 메시징)
- AI 챗봇 (의뢰서별 / 매물별)
- 학교 선배 톤앤매너 (친근한 AI 응답)
- 배포 자동화 (CI/CD)

---

## 7. Data & AI Design Principles

### 7.1 혼합 판단 모델 (Hybrid Decision Model)

공공데이터 기반 사실과 AI 추론을 분리하여 투명성을 확보합니다.

#### 1. 규칙 기반 판단 (Rule-based):
- 건축물대장 위반 여부 (공공데이터)
- 실거래가 대비 이탈 정도 (통계 기반)
- 토지등기 이상 여부

#### 2. 데이터 기반 판단 (Data-driven):
- 동일 지역·유형 통계 비교
- 가격 편차 분석
- 거래 빈도 및 추이

#### 3. AI 추론 (AI Inference):
- 매물 설명 불일치 감지
- 위험 패턴 인식 (전세사기 유형 학습)
- 사용자 프로필 기반 적합도 예측

### 7.2 투명성 원칙

- ✅ 리스크 판단에 데이터 출처 명시 (예: 국토부 실거래가 API)
- ✅ 공공데이터 vs AI 추론 영역 UI 구분 표시
- ✅ 법적 판단이 아닌 참고 정보임을 명시 (면책 문구)
- ✅ 데이터 최신성 업데이트 주기 표기

### 7.3 학습 및 피드백 루프

#### 데이터 수집:
- 추천 매물 클릭률
- 관심 매물 등록
- 거절 사유 (옵션)
- 사용자 만족도 평가

#### 모델 개선:
- 클릭률 높은 추천 패턴 학습
- 리스크 경고 적중 여부 → 경고 모델 강화
- 사용자 기준 vs AI 기준 오차 분석

### 7.4 RAG 설계 전략

#### 임베딩 전략:
- **매물 정보**: 지역, 가격, 면적, 옵션 등을 텍스트로 구조화 후 임베딩
- **임차인 프로필**: 요구조건을 Agent 1이 정제한 텍스트 임베딩
- **임베딩 모델**: OpenAI text-embedding-ada-002 (1536차원)

#### Retrieval 전략:
- 코사인 유사도 기반 Top-K 검색
- 하드 필터 (지역, 가격대) + 소프트 매칭 (선호도) 조합
- pgvector 인덱스 최적화 (IVFFlat / HNSW)

#### Prompt 설계:
- **Agent 1**: 사용자 입력 → 정제된 요구사항 JSON
- **Agent 2**: 검색 결과 → 추천 이유 설명 생성
- **Agent 3**: 임대인 매물 → 적합한 임차인 설명

---

## 8. Team Roles & Responsibilities

### 8.1 백엔드 Lead (다영)

**핵심 책임:**
- 소셜 로그인 (Google OAuth) + JWT + Redis 세션 관리
- ERD 설계 (사용자, 임대인, 임차인, 매물 테이블)
- 매물 CRUD API
- 회원가입, 로그인 API
- 매물 의뢰서/등록서 CRUD API
- 검색 API (필터링: 지역, 가격, 매물 종류, 계약 형태)
- Agent 1/2/3 연결 API 엔드포인트 구성
- 요구조건 → 문장 변환 API
- 사진/매물 설명 → AI 자동 서술 API
- 임대인 매물 등록/사진 업로드 (S3 연동)
- 지도 API 연동 (매물 위치 기반 시각화)

### 8.2 RAG Engineer (장훈, 재현)

**핵심 책임:**
- 공공 부동산 데이터 API 수집 (실거래가, 지역 통계, 매물 메타 정보)
- 2차: 직방 API 활용, 3차: 공공데이터 + 네이버부동산 크롤링
- 매물/임차인 프로필 벡터 임베딩 생성
- 청킹 및 전처리 설계 (LLM 출력 → DB 저장 형태)
- pgvector 스키마 설계 및 검색 쿼리 최적화
- 임베딩 데이터: vector(1536) 타입, OpenAI 모델 사용
- Agent 2 핵심 RAG 로직 (임차인 프로필 + 요구조건 → 매물 N개 추천)
- Agent 3 RAG 로직 (임대인 매물 + 요구조건 → 임차인 N명 추천)
- Prompt + Retrieval 전략 수립
- 데이터 수집 및 정제
- RAG 인덱싱 파이프라인 구축
- ETL 파이프라인 구현 (data_ingest_service 모듈)
- 공공 데이터 API 호출 스케줄러

### 8.3 MLOps + RabbitMQ 비동기 처리 (승연)

**핵심 책임:**
- RabbitMQ Producer/Consumer 설계
- Agent 2 비동기 파이프라인 (임차인→매물 추천)
- Agent 3 비동기 파이프라인 (임대인→임차인 추천)
- Worker 서버 설계 (aio-pika 기반)
- Dead-letter Queue, Retry 전략
- 장기 연산 처리 패턴 확립
- RAG 팀 로직 안정적 실행 오케스트레이션
- S3 / MinIO / Local File Storage 연결
- Docker Compose 구성 (RabbitMQ, DB, API 서비스)

### 8.4 프론트엔드 Lead (재현)

**핵심 책임:**
- 전체 화면 라우팅 설계
- 사용자/임대인/임차인 페이지 구성
- 매물 등록, 사진 업로드 UI
- 임차인 요구조건 입력 UI (지역, 가격, 매물 종류 선택)
- Agent 1 실시간 LLM 응답 연결 화면
- 추천 결과 화면 (매물 리스트, 상세 정보)
- 비동기 작업 task_id 기반 상태 표시 UX (로딩 인디케이터)
- 추천 이유 및 리스크 카드 UI
- 로그인/회원관리 UX
- 매물 상세 페이지 (네이버부동산 스타일)
- 메시지/컨택 기능 UI
- 임차인 조건 입력 UX 설계

### 8.5 LLM Prompt Engineer (효진)

**핵심 책임:**
- Agent 1 프롬프트 설계
  - 임차인 요구조건 요약/정제
  - 임대인 매물 설명 자동 생성
- Agent 2 프롬프트 설계 (추천 설명 문장) - 3차 이후
- Agent 3 프롬프트 설계 (임차인 추천 사유) - 3차 이후
- LLM 응답 포맷 정의 (JSON 스키마 등)
- Tenant & Landlord 도메인 전처리 데이터 임베딩 준비

---

## 9. User Flow Scenarios

### 9.1 임차인 User Flow

1. 회원가입/로그인 (Google OAuth)
2. 역할 선택: 임차인
3. 매물 의뢰서 작성
   - 지역 선택 (마포구/용산구/영등포구)
   - 매물 종류 선택 (아파트/오피스텔/빌라 등)
   - 계약 형태 (전세/매매)
   - 가격 범위 입력
   - 추가 요구사항 텍스트 입력
4. 의뢰서 확인 화면
5. **[확인]** 버튼 클릭 → 비동기 추천 시작 (로딩...)
6. 추천 매물 N개 리스트 조회
   - 각 매물: 사진, 가격, 지역, 추천 이유, 리스크 경고
7. 매물 클릭 → 상세 정보 조회 (네이버부동산 스타일)
8. **[관심 매물]** 저장 또는 **[임대인에게 컨택하기]**
9. 나에게 컨택 요청한 임대인 목록 조회
10. **[수락]** → 전화번호 공개, **[거절]**

### 9.2 임대인 User Flow

1. 회원가입/로그인 (Google OAuth)
2. 역할 선택: 임대인
3. 매물 등록
   - 지역 선택
   - 매물 종류 선택
   - 계약 형태
   - 가격 입력
   - 사진 업로드
   - 매물 설명 입력 (또는 AI 자동 생성)
4. 매물 등록서 확인 화면
5. **[확인]** 버튼 클릭 → 비동기 추천 시작 (로딩...)
6. 적합한 임차인 N명 리스트 조회 (가명/닉네임)
7. 임차인 클릭 → 의뢰서 열람
8. **[컨택하기]** → 임차인에게 요청 전송
9. 임차인 수락 시 전화번호 확인 가능

---

## 10. Success Metrics (OKR)

### 10.1 Objective

**대학생이 첫 자취 주거 의사결정을 신뢰하고 스스로 판단할 수 있게 돕는 서비스**

### 10.2 Key Results

#### KR1) 의미 있는 매칭 경험 확보
- 추천 매물 클릭률 **50% 이상**
- 관심 매물 등록 건수
- 컨택 요청 발생률
- 실제 계약 성사 (장기 목표)

#### KR2) 평균 추천 응답 속도 < 5초
- 대학생 기준 답답하지 않은 수준의 사용성
- 비동기 처리 최적화로 체감 속도 개선

#### KR3) MVP 유료 전환 사용자 10명 이상
- 프리미엄 기능에 대한 지불 의사 검증
- 가치 제공 수준 측정

#### KR4) 추천 매물 대비 클릭률 50% 이상
- 개인화 추천 정확도 검증
- RAG 및 AI 추천 품질 지표

---

## 11. Roadmap

### 11.1 Phase 1: MVP (6~8주, 3차 프로젝트)

**목표:** 핵심 기능 구현 및 기술 검증

#### 포함:
- ✅ 임차인/임대인 회원가입 및 역할 구분
- ✅ 매물/의뢰서 CRUD
- ✅ Agent 1 요구조건 정제
- ✅ Agent 2 추천 (임차인→매물)
- ✅ 기본 UI 흐름 완성 (로그인→의뢰서→추천→상세)
- ✅ 관심 매물 저장
- ✅ 임대인 매칭 및 컨택 요청
- ✅ 리스크 경고 Top 3 표시

#### 제외:
- ❌ 채팅 기능
- ❌ 배포 자동화
- ❌ 고급 필터링 (지도, 이미지)
- ❌ Agent 3 (임대인→임차인 추천)

### 11.2 Phase 2: 베타 (2~3개월)

**목표:** 사용자 피드백 반영 및 기능 확장

- Agent 3 구현 (임대인→임차인 추천)
- 리스크 경고 상세 근거 제공
- 채팅 기능 추가
- 지역 확장 (서울 전역 → 수도권)
- 프리미엄 기능 도입 (과금 모델 테스트)
- 소규모 베타 테스터 운영 (50~100명)
- 사용자 피드백 루프 구축

### 11.3 Phase 3: 정식 출시 (6개월~)

**목표:** 시장 진입 및 성장

- 지도 UI 통합 (매물 위치 시각화)
- 이미지 기반 추천 (사진 유사도 검색)
- 고급 필터링 (학교와의 거리, 교통편의성 등)
- 결제 및 구독 모델 정식 출시
- 모바일 앱 출시
- B2B 확장 (대기업 사내 주거 지원)
- AI 계약 검토 / 법률 체크 Agent 추가
- 중개 수수료 모델 도입

---

## 12. Risks & Mitigation

### 12.1 추천 신뢰도 부족

**리스크:** AI 추천에 대한 사용자 불신

**대응:**
- 추천 근거와 출처 명시 (투명성 강화)
- 초기 소규모 테스트 유저 그룹 운영
- 공공데이터 vs AI 추론 영역 구분 UI
- 사용자 평가 및 피드백 적극 수집

### 12.2 AI 과신 위험

**리스크:** 사용자가 AI 판단을 맹신하여 부적절한 계약

**대응:**
- AI 판단 범위 명시 (법적 판단 아님)
- 면책 문구 표시 (최종 계약 판단은 사용자 책임)
- 리스크 경고 강조 (전세사기, 건축물대장 위반 등)

### 12.3 데이터 최신성 문제

**리스크:** 공공 API 데이터 지연 또는 오래된 정보

**대응:**
- 데이터 업데이트 주기 UI 표기
- 스케줄러 기반 자동 데이터 갱신
- 사용자 신고 기능 (잘못된 정보 제보)

### 12.4 기능 과다 위험

**리스크:** MVP 단계에서 너무 많은 기능 시도

**대응:**
- MVP 스코프 엄격히 고정
- '정확성 + 리스크 경고 + 사용자 이해'에 집중
- Phase 2 이후 기능은 데이터 기반 우선순위 결정

### 12.5 사용자 행동 유도 부족

**리스크:** 사용자가 평가/피드백을 제공하지 않음

**대응:**
- 초기 사용자 보상 (상품권, 쿠폰)
- 평가 참여 시 추가 기능 제공 (프리미엄 체험)
- 간단한 피드백 UI (별점, 간단 코멘트)

---

## 13. Legal & Compliance

### 13.1 책임 범위 및 고지

- ⚠️ 본 서비스는 법적·계약적 판단을 대체하지 않음
- ⚠️ 의사결정 보조 정보 제공 목적
- ⚠️ 최종 계약 판단은 사용자 책임
- ⚠️ 이용약관 및 면책조항 명시 필수

### 13.2 개인정보 보호

- 🔒 전화번호는 수락 이후에만 공개
- 🔒 임차인 익명성 보장 (가명 또는 닉네임 사용)
- 🔒 개인정보 처리방침 준수
- 🔒 GDPR / 개인정보보호법 대응 (추후)

---

## 14. Data Sources

### 14.1 공공 데이터 API

- 국토교통부 실거래가 공개시스템 API
- 공공데이터 포털 아파트 실거래 API
- 건축물대장 정보 API
- 지역별 통계 정보 API

### 14.2 크롤링 데이터 (3차 이후)

- 네이버부동산 (기술적으로 가능, 법적 검토 필요)
- 직방 API (2차 프로젝트용)

### 14.3 데이터 특성

- 매물 텍스트 정보는 구조화되어 있어 RAG와 호환성 높음
- 지역별 카테고리화 사전 작업 후 저장
- 임베딩 전처리 완료된 데이터 유지

---

## 15. Non-Functional Requirements

### 15.1 성능 요구사항

- ⚡ 추천 응답 시간: **5초 이내** 목표
- ⚡ 페이지 로딩 시간: **2초 이내**
- ⚡ API 응답 시간: **200ms 이내** (단순 조회)
- ⚡ 동시 접속자 **100명** 지원 (MVP)

### 15.2 확장성

- 지역 확장 가능한 데이터베이스 스키마
- 매물 유형 추가 용이한 구조
- 마이크로서비스 아키텍처 고려 (향후)
- 수평 확장 가능한 인프라 (Docker 기반)

### 15.3 보안

- 🔐 HTTPS 통신 필수
- 🔐 JWT 토큰 기반 인증
- 🔐 Redis 세션 암호화
- 🔐 민감 정보 (전화번호) 암호화 저장
- 🔐 SQL Injection, XSS 방어
- 🔐 Rate Limiting (API 요청 제한)

### 15.4 모니터링 및 로깅

- 📊 Task 상태 추적 가능 (RabbitMQ 기반)
- 📊 에러 로그 수집 (Sentry 또는 ELK 스택)
- 📊 사용자 행동 로그 (GA, Mixpanel 등)
- 📊 API 성능 모니터링 (APM 도구)

---

## 16. Database Schema Overview (ERD)

### 16.1 핵심 테이블

#### Users (사용자)
```sql
- user_id (PK)
- email
- role (임차인/임대인)
- phone_number (암호화)
- created_at, updated_at
```

#### Properties (매물)
```sql
- property_id (PK)
- landlord_id (FK → Users)
- region (지역)
- property_type (아파트/오피스텔 등)
- contract_type (전세/매매)
- price
- description (AI 생성 포함)
- images (JSON 배열 또는 별도 테이블)
- embedding (vector 1536)
- created_at, updated_at
```

#### Tenant_Requests (임차인 의뢰서)
```sql
- request_id (PK)
- tenant_id (FK → Users)
- region
- property_type
- contract_type
- price_range (min, max)
- additional_requirements (텍스트)
- embedding (vector 1536)
- created_at, updated_at
```

#### Tenant_Recommend_Requests (임차인 추천 요청)
```sql
- recommend_request_id (PK)
- request_id (FK → Tenant_Requests)
- request_payload (JSON)
- task_id (비동기 작업 ID)
- status (pending/completed/failed)
- result (JSON - 추천 매물 목록)
- created_at
```

#### Landlord_Recommend_Requests (임대인 추천 요청)
```sql
- recommend_request_id (PK)
- property_id (FK → Properties)
- request_payload (JSON)
- task_id
- status
- result (JSON - 추천 임차인 목록)
- created_at
```

#### Contacts (컨택 요청)
```sql
- contact_id (PK)
- sender_id (FK → Users)
- receiver_id (FK → Users)
- property_id (FK → Properties, nullable)
- status (pending/accepted/rejected)
- created_at, updated_at
```

#### Favorites (관심 매물)
```sql
- favorite_id (PK)
- user_id (FK → Users)
- property_id (FK → Properties)
- created_at
```

---

## 17. Appendix

### 17.1 용어 정의

- **RAG** (Retrieval-Augmented Generation): 검색 증강 생성, 벡터 검색과 LLM을 결합한 기술
- **pgvector**: PostgreSQL 벡터 검색 확장
- **임베딩** (Embedding): 텍스트를 고차원 벡터로 변환
- **Agent**: 특정 작업을 수행하는 AI 모듈
- **ETL**: Extract-Transform-Load 데이터 파이프라인
- **청킹** (Chunking): 긴 텍스트를 작은 단위로 분할

### 17.2 참고 자료

- OpenAI API Documentation
- pgvector GitHub Repository
- FastAPI Documentation
- RabbitMQ Tutorial
- 국토교통부 공공데이터 포털

### 17.3 변경 이력

- **v2.0 (2024-12)**: 최종 통합 버전, 모든 요구사항 반영
- **v1.0**: 초기 기획안

---

## 전략적 제안 및 개선 포인트

### 강점
- ✅ 전략적 타겟 정의 (대학생, 정보 부족, 불안, 시간 압박)
- ✅ 문제 중심 설계 (첫 집 계약, 리스크 판단)
- ✅ 단계적 기능 설계 (필수 vs 후순위 명확)
- ✅ 데이터 기반 피드백 루프 구상
- ✅ AI + 데이터 혼합 모델 설계

### 위험 요소
- ⚠️ 추천 신뢰도 검증 필요
- ⚠️ 초기 MVP 복잡도 관리 필요
- ⚠️ 사용자 이해도 및 설명 중심 UX 강화 필요

### 개선 방향
1. **초기 MVP 집중**: 정확한 추천 + 리스크 안내 + 이해 중심 UX
2. **투명성 강화**: 혼합 판단 모델 (공공데이터 + AI 추론 분리)
3. **데이터 신뢰도**: 출처 표기, 사용자 과신 방지
4. **보상 구조**: 초기 사용자 인센티브로 데이터 확보
5. **단계적 확장**: 데이터 기반 후속 기능 우선순위 결정

---

**— End of Document —**

보조 참고용 서브 prd

# Product Requirements Document (PRD)

## 문서 정보

* **버전**: 2.0 (Final)
* **작성일**: 2025-12
* **작성자**: 이용준
* **목적**: 학원 프로젝트 → 실제 서비스 출시
* **범위**: MVP → 베타 → 정식 출시

---

## 1. 제품 개요 (Overview)

### 한 문장 정의

**첫 자취 대학생이 집을 고를 때, AI가 추천·설명·리스크 근거를 제공해 혼자서도 판단하게 돕는 주거 의사결정 서비스**

### 1.1 제품명 (가칭)

AI 기반 대학생 주거 의사결정 지원 서비스

### 1.2 문제 정의 (Problem)

* 첫 자취 대학생은 부동산 정보·계약 지식이 부족함
* 시간 압박과 불안으로 인해 **충분한 검토 없이 의사결정**하는 경우가 많음
* 기존 서비스는 "많은 매물"을 보여주지만 **판단과 설명을 대신해주지 못함**

### 1.3 해결책 (Solution)

* AI가 추천 + 설명 + 리스크 경고를 함께 제공
* 대학생이 **혼자서도 집을 판단할 수 있게 돕는 의사결정 보조 서비스**
* 중개인의 설명·판단 역할을 단계적으로 대체

### 1.4 제품 철학

* AI는 결정을 강요하지 않는다
* **판단 근거와 리스크를 투명하게 제시**하여 사용자가 스스로 결정하게 돕는다

## 2. 타겟 사용자 (Target Users)

### 2.1 핵심 타겟 (Primary Target)

**20~30대 대학생 / 사회초년생 (첫 자취 수요자)**

* 부동산 사전지식이 부족함
* 정보 부족 + 불안 + 시간 압박이 동시에 존재
* 의사결정은 스스로 하지만 **설명이 반드시 필요한 사용자**
* AI 서비스에 대한 거부감이 낮음

👉 단순 추천보다 **"왜 이 집이 맞는지 / 왜 위험한지"를 설명해주는 것이 핵심 가치**

### 2.2 주요 타겟 지역

* 대학생 밀집 지역 중심 MVP

  * 마포구, 서대문구, 은평구
  * 혜화, 노원, 도봉

---

## 3. 핵심 가치 제안 (Value Proposition)

* 추천보다 중요한 것은 **이해와 신뢰**
* "왜 이 집이 맞는지" + "왜 위험할 수 있는지"를 함께 설명
* 공공데이터 기반 사실 + AI 해석을 분리한 **투명한 혼합 판단 모델**
* 첫 자취 계약에서 놓치기 쉬운 리스크를 사전에 인지하도록 지원

---

## 4. 시스템 아키텍처 개요

### 4.1 핵심 구성 요소

* Frontend (Web)
* Backend API (FastAPI)
* Vector DB (PostgreSQL + pgvector)
* LLM (OpenAI)
* Message Queue (RabbitMQ)
* Object Storage (S3 / MinIO)

### 4.2 Agent 구조

| Agent  | 역할                    |
| ------ | --------------------- |
| Agent1 | 요구조건 정제·요약 / 매물 설명 생성 |
| Agent2 | 임차인 → 매물 추천 (RAG)     |
| Agent3 | 임대인 → 임차인 추천 (RAG)    |

---

## 5. 주요 기능 요구사항 (Functional Requirements)

### 5.1 사용자 등급

#### 무료 사용자

* 매물 의뢰서 1개
* 추천 매물 10개/일
* 리스크 경고: 핵심 3개 요약
* 임대인 컨택 요청 제한

#### 프리미엄 사용자 (가칭)

* 매물 의뢰서 무제한
* 추천 매물 무제한
* 리스크 경고 상세 (근거·출처 포함)
* AI 추가 질의(조건 재정제)
* 채팅/컨택 우선권

---

### 5.2 MVP 필수 기능 (우선순위 1)

* 다중 매물 의뢰서 생성
* 초기 입력 기반 개인화 추천
* 추천 이유 설명 (AI 판단 근거)
* 리스크 경고 카드 UI
* 관심 매물 저장 (행동 데이터 수집)
* 임대인 매칭 및 컨택

---

### 5.3 후순위 기능 (Phase 2 이후)

* 지도 UI
* 이미지 기반 추천
* 별점 시스템
* 실시간 인기 매물 수

## 6. 데이터 & AI 설계 원칙

### 6.1 혼합 판단 모델

| 구분     | 내용                |
| ------ | ----------------- |
| 규칙 기반  | 건축물대장 위반, 실거래가 이탈 |
| 데이터 기반 | 동일 지역·유형 통계 비교    |
| AI 추론  | 설명 불일치, 위험 패턴 감지  |

### 6.2 투명성 원칙

* 리스크 판단에 데이터 출처 명시
* 공공데이터 vs AI 추론 영역 구분 표시
* 법적 판단이 아닌 참고 정보임을 명시

### 6.3 학습 및 피드백 루프

* 추천 클릭 / 관심 / 거절 사유 수집
* 사용자 만족도 → 추천 모델 보정
* 리스크 적중 여부 → 경고 모델 강화

---

## 7. 비동기 처리 요구사항

* 추천 로직은 장기 연산 → 비동기 처리
* RabbitMQ 기반 Task Queue
* task_id 기반 상태 조회
* Retry / Dead-letter Queue 지원

---

## 8. 비기능 요구사항 (Non-Functional)

* 확장성: 지역/매물 유형 확장 가능 구조
* 보안: 전화번호는 수락 이후에만 공개
* 성능: 추천 응답 5~10초 이내 목표
* 로그/모니터링: Task 상태 추적 가능

---

## 9. MVP 범위 (3차 프로젝트)

### 포함

* 임차인/임대인 회원가입
* 매물/의뢰서 CRUD
* Agent1 요구조건 정제
* Agent2 추천 (임차인 → 매물)
* 기본 UI 흐름 완성

### 제외 (차후)

* 채팅 기능
* 배포 자동화
* 고급 필터링
* 실시간 지도 고도화

---

## 10. 성공 지표 (OKR)

### Objective

대학생이 첫 자취 주거 의사결정을 **신뢰하고 스스로 판단할 수 있게 돕는 서비스**

### Key Results

* **KR1)** 의미 있는 매칭 경험 확보

  * 추천 클릭
  * 관심 매물 등록
  * 컨택 요청

* **KR2)** 평균 추천 응답 속도 < 5초

* **KR3)** MVP 유료 전환 사용자 10명 이상

* **KR4)** 추천 매물 대비 클릭률 50% 이상

---

## 11. 리스크 및 대응 전략

* 추천 신뢰도 부족 → 근거·출처 표시, 초기 소규모 테스트
* AI 과신 위험 → 판단 범위 명시, 면책 문구
* 데이터 최신성 문제 → 업데이트 주기 표기
* 기능 과다 위험 → MVP 스코프 고정 원칙

---

## 12. 확장 로드맵 (Future)

* 중개 수수료 모델
* B2B (대기업 사내 주거 지원)
* AI 계약 검토 / 법률 체크 Agent
* 모바일 앱

## 12. 단계별 로드맵

### Phase 1: MVP (6~8주)

* 임차인 의뢰서
* 매물 추천 + 리스크 카드(Top 3)
* 관심 매물
* 임대인 매물 등록 + 컨택 요청

### Phase 2: 베타

* 리스크 상세 근거
* 채팅 기능
* 지역 확장

### Phase 3: 정식 출시

* 지도 / 이미지 / 고급 필터
* 결제 및 구독 모델

---

## 13. 책임 범위 및 고지

* 본 서비스는 법적·계약적 판단을 대체하지 않음
* 의사결정 보조 정보 제공 목적
* 최종 계약 판단은 사용자 책임
-------------